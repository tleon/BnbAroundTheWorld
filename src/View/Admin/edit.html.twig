{% extends "layoutAdmin.html.twig" %}

{% block content %}
<div class="cards">
    <div class="row">
        <div class="col s12">
            <div class="card white w-full">
                <div class="card-content">
                    <div id="editroom">
                        <div class="editroom_icon">
                            <a href="/admin/chambres"><svg role="img" xmlns="http://www.w3.org/2000/svg" width="32px"
                                    height="32px" viewBox="0 0 24 24" aria-labelledby="exitIconTitle exitIconDesc"
                                    stroke="#00d1b2" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="miter"
                                    fill="none" color="#00d1b2">
                                    <title id="exitIconTitle">Exit</title>
                                    <desc id="exitIconDesc">Icon of doors with an arrow pointing outside of them</desc>
                                    <path d="M18 15l3-3-3-3" />
                                    <path d="M11.5 12H20" />
                                    <path stroke-linecap="round" d="M21 12h-1" />
                                    <path d="M15 4v16H4V4z" />
                                </svg></a>
                        </div>
                        <form action="/admin/updateRoom/{{ rooms.id }}" method="post">
                            <div class="flex_edit_room">
                                <div class="editroom_left">
                                    <input type="hidden" value="{{ rooms.id }}" name="id">

                                    <!-- a demasquer-->
                                    <input class="validate" id="image" name="pic_path" type="hidden"
                                        value="{{ rooms.pic_path }}">

                                    <div class="showBooking_entete">Infos</div>
                                    <div>
                                        <p>Nom de la chambre</p>
                                    </div>
                                    <div>
                                        <p>Location</p>
                                    </div>
                                    <div>
                                        <p>Description</p>
                                    </div>
                                    <div>
                                        <p>Options</p>
                                    </div>
                                    <div>
                                        <p>Prix</p>
                                    </div>
                                </div>
                                <div class="editroom_right">
                                    <div class="showBooking_entete">Donn√©es</div>
                                    <p class="error_msg_edit_room"> {{ error.name }}</p>
                                    <div><input class="validate" id="name" name="name" type="text"
                                            value="{{ rooms.name }}"></div>
                                    <p class="error_msg_edit_room">{{ error.location }}</p>
                                    <div><input class="validate" id="location" name="location" type="text"
                                            value="{{ rooms.location }}"></div>
                                    <p class="error_msg_edit_room">{{ error.description }}</p>
                                    <div><input class="validate" id="description" name="description" type="text"
                                            value="{{ rooms.description }}"></div>

                                    <p class="error_msg_edit_room"> {{ error.caracs }}</p>
                                    <div><input class="validate" id="caracs" name="caracs" type="text"
                                            value="{{ rooms.caracs }}"></div>
                                    <p class="error_msg_edit_room"> {{ error.price }}</p>
                                    <div><input class="validate" id="price" name="price" type="text"
                                            value="{{ rooms.price }}"></div>
                                </div>
                            </div>
                            <div class="edit_room_button">
                                <div class="flex_btn">
                                    <button value="submit" type="submit">Update</button>
                                </div>
                                <div id="editImg" class="flex_btn">
                                    <button>Edit images</button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div id="myModal" style="display: none">
                        <div id="close">
                            <svg role="img" xmlns="http://www.w3.org/2000/svg" width="48px" height="48px"
                                viewBox="0 0 24 24" aria-labelledby="circleOkIconTitle circleOkIconDesc"
                                stroke="#00d1b2" stroke-width="1" stroke-linecap="square" stroke-linejoin="miter"
                                fill="none" color="#00d1b2">
                                <title id="circleOkIconTitle">OK</title>
                                <desc id="circleOkIconDesc">Icon of a checkmark closed in a circle</desc>
                                <polyline points="7 13 10 16 17 9" />
                                <circle cx="12" cy="12" r="10" />
                            </svg>
                        </div>
                        
                        <div class="textar">
                            <div class="textAr_title"><p>Editez le commentaire</p></div>
                            <textarea name="" id="textArea"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
{% block javascript %}

<script>
    let close = document.getElementById('close');
    let modal = document.getElementById('myModal');
    let main = document.getElementById('editroom');
    let textarea = document.getElementById('textArea');
    let inputdescription = document.getElementById('description')

    function editComment(Elm) {
        close.addEventListener('click', toggleModal);
    }

    function closeEditor(Elm) {
        close.removeEventListener('click', toggleModal);
    }

    function toggleModal() {
        var currentState = modal.style.display;

        if (currentState === 'none') {
            modal.style.display = 'block';
            main.style.display = 'none';
            textarea.value = inputdescription.value;
            editComment(close);
        } else {
            inputdescription.value = textarea.value;
            modal.style.display = 'none';
            main.style.display = 'block';
            closeEditor(close);
        }
    }

    inputdescription.addEventListener('click', toggleModal);

</script>
{% endblock %}